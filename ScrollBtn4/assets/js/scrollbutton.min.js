/**
 * Jellybo ScrollButton004 , JavaScript scroll button animation
 *
 * @license Copyright (c) 2017, Jellybo. All rights reserved, http://tech.jellybo.com/doc/license.html
 * To use this plugin you must buy our product in http://jellybo.com.
 * @author  Marian Spisiak
 * @created 2017-07-27
 * @link    http://jellybo.com
 */

var Jellybo=Jellybo||{};Jellybo._prefix="jellybo",Jellybo.BootLoader=function(t){var n={pluginName:"",animationFactory:null,publicFunctions:null,selector:"",settingAttributes:null},o=Jellybo._prefix;return function(i){function r(n,o){return function(){var i=null,r=arguments;return n.each(function(){var n=t(this).data(f);i=n[o].apply(n,r)}),i}}function e(t){var n={};for(var o in s.publicFunctions)n[s.publicFunctions[o]]=r(t,s.publicFunctions[o]);return n}function a(t,n){return function(){return t[n].apply(t,arguments)}}function l(n,o){var i={};for(var r in s.settingAttributes){var e=s.settingAttributes[r].toString().toLowerCase();n.data(e)&&(i[e]=n.data(e))}1===o.length&&t.extend(i,o[0]);var l=s.animationFactory(n,i),c={};l.init(),c.settings=a(l,"settings");for(var r in s.publicFunctions)c[s.publicFunctions[r]]=a(l,s.publicFunctions[r]);return c}function c(){return function(){var n=arguments;return this.each(function(){t(this).data(f)?1===n.length&&t.isPlainObject(n[0])&&t(this).data(f).settings(n[0]):t(this).data(f,l(t(this),n))}),e(this)}}function u(){t.fn[s.pluginName]=c()}var s={};t.extend(s,n,i);var f=o+"animation_plugin_"+s.pluginName;return function(){return u(),t(function(){t(s.selector)[s.pluginName]()}),null}()}}($),Jellybo.ScrollButton4=function(t,n,o){function i(n,o){var i=0;for(var r in n){var e=r/100;if(o>i&&e>=o||0===i&&e>=o){var a=(o-i)/(e-i);t.isFunction(n[r])&&n[r](a)}i=e}}function r(n,o){function i(o,i){n.on(o,function(){t.isFunction(i)?i.apply(this,arguments):window[i].apply(this,arguments)})}for(var r in o)for(var e in l)r.toString().toLowerCase()===e.toString().toLowerCase()&&i(l[e],o[r])}function e(n,o,i){for(var r in o)t.inArray(r,i)<0&&(n[r]=o[r])}var a={time_offset:.83,width:40,height:70,color1:"#ccc",color2:"#fff",color3:"#999",loops:1,shadow_color:"#fff",line_stroke:2,duration:1100,duration2:700,duration3:1200,text:"Scroll",font_size:16},l={onSubmit:"event_submit",onItemSelect:"event_itemClick",onChange:"event_change",onItemHighlight:"event_itemHighlight"},c=[];for(var u in l)c.push(u);return function(l,u){function s(o){y=t(o),y.html('<div style="display: inline-block;" class="jellyboScrollButton004Wrapper"><svg style="display: inline-block;"></svg></div>'),b=n(y.find("svg")[0]),b.attr({width:A,height:C,style:"overflow: visible;"}),L=y.find(".jellyboScrollButton004Wrapper");var i=7,r=v.text.length,e=r*(v.font_size/2+i)-N;L.css({paddingBottom:.7*z,paddingLeft:e/2,paddingRight:e/2}),S=Math.min(N,z)/2,m=b.rect(D,D,N,z,S,S);var a=b.filter(n.filter.shadow(0,0,2,P,.5));m.attr({stroke:R,fill:"none",strokeWidth:j,strokeLinecap:"round",opacity:.3}),k=b.rect(D,D,N,z,S,S),k.attr({stroke:H,fill:"none",strokeWidth:j,strokeLinecap:"round",opacity:.8,filter:a}),w=2*Math.PI*S+2*(z-2*S),F=.1*N,B=F,x=b.circle(N/2+D,S,B),x.attr({fill:H,stroke:"none",filter:a,opacity:.8}),J=b.text(N/2,z+.7*z,v.text),J.attr({fill:H,stroke:"none",opacity:.8,style:"text-anchor: middle; font-family: 'UniformRnd-Regular', arial; letter-spacing: "+i+"px;",fontSize:v.font_size}),_=b.group(m,k,x),f()}function f(){switch(O){case 0:p(),O=1;break;case 1:h(),T++,T===U?(O=2,T=0):O=0;break;case 2:setTimeout(function(){f()},I),O=0}}function p(){k.attr({strokeDashoffset:0,strokeDasharray:w+"px 0px"}),n.animate(0,1,function(t){var o=d(0,w,t),r=S;k.attr({strokeDashoffset:-(o/2),strokeDasharray:w-o+"px "+o+"px"});var e=0;i({40:function(t){var o=new n.Matrix,i=d(0,$,t);o.translate(0,i),_.attr({transform:o})}},t),i({70:function(){e=F},100:function(t){e=d(F,0,t)}},t),i({100:function(t){r=d(S,z-S,t)}},t),x.attr({cy:r,r:e});var a=d(.8,.2,t);J.attr({opacity:a})},M,o.linear,function(){f()})}function h(){k.attr({strokeDasharray:w+"px 0px",opacity:0}),n.animate(0,1,function(t){var o=S,r=0;i({90:function(t){var o=new n.Matrix,i=d($,0,t);o.translate(0,i),_.attr({transform:o})}},t),i({50:function(t){r=0},90:function(t){r=d(0,B,t)},100:function(){r=B}},t),i({50:function(t){},90:function(t){k.attr({opacity:t})}},t),i({90:function(t){o=d(z-S,S,t)},100:function(){o=S}},t);var e=d(.2,.8,t);J.attr({opacity:e}),x.attr({cy:o,r:r})},W,o.linear,function(){f()})}function d(t,n,o){return t+(n-t)*o}function g(t){e(v,t,c),r(y,t)}var v={};t.extend(v,a),e(v,u,c);var y,b,m,k,x,_,w,S,F,B,J,L,j=v.line_stroke,A=v.width,C=v.height,D=j/2,N=A-2*D,z=C-2*D,M=v.duration,W=v.duration2,I=v.duration3,R=v.color1,H=v.color2,P=v.shadow_color,$=7,O=0,T=0,U=v.loops;return{init:function(){s(l)},settings:g}}}($,Snap,mina),Jellybo.BootLoader({pluginName:"jellyboScrollButton004",animationFactory:Jellybo.ScrollButton4,publicFunctions:["start","stop"],selector:".jellybo-ScrollBtn004",settingAttributes:["color1","color2","shadow_color","loops","line_stroke","height","width","text"]});